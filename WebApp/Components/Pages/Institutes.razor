@page "/institutes"
@attribute [StreamRendering]

<h3>Institutes</h3>

@* <NavLink href="/">
	<button class="btn btn-primary">
		На главную
	</button>
</NavLink> *@



@if (table.Rows.Count == 0)
{
	<p><em>Loading...</em></p>
}
else
{
	for (int i = 0; i < table.Rows.Count; i++)
	{
		<br />
		<span>ID: @table.Rows[i][0] Название: @table.Rows[i][1] Город: @table.Rows[i][2] Ссылка: @table.Rows[i][3]</span>
	}
	
}


@code {
	DataBase? db;
	DataTable? table;
	MySqlDataAdapter? adapter;
	MySqlCommand? command;

	protected override void OnInitialized()
	{
		db = new DataBase();

		table = new DataTable();

		adapter = new MySqlDataAdapter();

		command = new MySqlCommand("SELECT * FROM `institutes`", db.getConnection());
		adapter.SelectCommand = command;
		adapter.Fill(table);
	}
}
